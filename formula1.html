<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Formula 1: Historical stats</title>
    <link rel="stylesheet" href="formula.css" media="all" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- chart.js framework -->
  </head>
  <body>
    <header>
      <div>
        <h1>Winds of Change Are Blowing Over Athens</h1>
        <a href="#introduction">Start The Story</a>
      </div>
    </header>
    <section class="scrollContainer" id="introduction">
      <div class="scrollText">
        <p>
         Formula 1 is the pinnecale of motorsport, it captivates audiences around the globe with its blend of 
         cutting-edge technology, high-speed racing and top-tier athleticism. Formula-1 showcases the worlds 
         most talented drivers, competeing in high-performance cars engineered by some of the most prestigious 
         manufacturers.  
        </p>
      </div>
      <!-- <div class="scrollText">
        <p>The election booths are closed. The count is finished.</p>
      </div>
      <div class="scrollText">
        <p>There will be some changes around here...</p>
      </div>
    </section>
    <section class="textSection">
      <h2>...the results are in!</h2>
      <p>
        Athens is in for a change in goverment, as the 2023 elections contained
        a few suprises
      </p>
      <div style="min-height: 341px">
        <script
          type="text/javascript"
          defer
          src="https://datawrapper.dwcdn.net/hrtTe/embed.js?v=1"
          charset="utf-8"
        ></script>
        <noscript
          ><img src="https://datawrapper.dwcdn.net/hrtTe/full.png" alt=""
        /></noscript>
      </div>
      <p>Let's look at the biggest suprises</p>
    </section>
    <section id="changingBg" class="scrollContainer">
      <div id="decline" class="scrollText">
        <h2>The Greatest Fall</h2>
        <aside class="alignRight">
          <div class="circle redBg">
            <span class="big">-1239</span>
            <span class="small">Votes</span>
          </div>
        </aside>
        <p>
          SenterPartiet had a decrease in votes of 1239 since 2019. This means
          that ArbeidersPartiet is losing a lot of partners since 2019
        </p>
      </div>
      <div id="increase" class="scrollText">
        <h2>The Higest Riser</h2>
        <aside class="alignRight">
          <div class="circle greenBg">
            <span class="big">1290</span>
            <span class="small">Votes</span>
          </div>
        </aside>
        <p>
          INP who were founded in 2020 and thusly not elegible in the 2019
          election, makes a huge impact on the 2023 election.
        </p>
      </div>
      <div class="scrollText">
        <h2>Steal From the Fallen</h2>
        <p>
          Comparing the number, we could argue that INP has "stolen" the votes
          Senterpartiet got in 2019. This means that Høyre now have more
          potential partners and will probably be in goverment for the next four
          years.
        </p>
        <p>But, those were not the only changes from 2019</p>
        <canvas id="comparison"></canvas>
      </div>
    </section>
    <script>
      const comparison = document.getElementById("comparison");
      const data = [
        {
          Partyname: "Arbeiderpartiet",
          Abbreviation: "AP",
          Votes2019: "2603",
          Votes2023: "2982",
        },
        {
          Partyname: "Fremskrittspartiet",
          Abbreviation: "FrP",
          Votes2019: "1034",
          Votes2023: "1030",
        },
        {
          Partyname: "Høyre",
          Abbreviation: "H",
          Votes2019: "4141",
          Votes2023: "3997",
        },
        {
          Partyname: "Kristelig Folkeparti",
          Abbreviation: "KrF",
          Votes2019: "478",
          Votes2023: "510",
        },
        {
          Partyname: "Miljøpartiet de Grønne",
          Abbreviation: "MdG",
          Votes2019: "1058",
          Votes2023: "530",
        },
        {
          Partyname: "Rødt",
          Abbreviation: "R",
          Votes2019: "1044",
          Votes2023: "802",
        },
        {
          Partyname: "Senterpartiet",
          Abbreviation: "Sp",
          Votes2019: "2037",
          Votes2023: "798",
        },
        {
          Partyname: "Sosialistisk Venstreparti",
          Abbreviation: "SV",
          Votes2019: "744",
          Votes2023: "672",
        },
        {
          Partyname: "Venstre",
          Abbreviation: "V",
          Votes2019: "393",
          Votes2023: "190",
        },
        {
          Partyname: "Pensjonistpartiet",
          Abbreviation: "Pp",
          Votes2019: "1206",
          Votes2023: "1438",
        },
        {
          Partyname: "Industri og Næringspartiet",
          Abbreviation: "INP",
          Votes2019: "0",
          Votes2023: "1290",
        },
        {
          Partyname: "Liberalistene",
          Abbreviation: "Lib",
          Votes2019: "0",
          Votes2023: "51",
        },
        {
          Partyname: "Norgesdemokratene",
          Abbreviation: "ND",
          Votes2019: "0",
          Votes2023: "201",
        },
      ];

      const labelData = [];
      data.map((item) => labelData.push(item.Abbreviation));
      const votes2019 = [];
      data.map((item) => votes2019.push(item.Votes2019));
      const votes2023 = [];
      data.map((item) => votes2023.push(item.Votes2023));

      new Chart(comparison, {
        type: "bar",
        data: {
          labels: labelData,
          datasets: [
            {
              label: "Votes 2019",
              data: votes2019,
            },
            {
              label: "Votes 2023",
              data: votes2023,
            },
          ],
        },
        options: {
          scales: {
            y: { beginAtZero: true },
          },
        },
      });

      // function to check if element is in viewport
      // https://www.javascripttutorial.net/dom/css/check-if-an-element-is-visible-in-the-viewport/
      function isInViewport(el) {
        const rect = el.getBoundingClientRect();
        return (
          rect.top >= 0 &&
          rect.left >= 0 &&
          rect.bottom <=
            (window.innerHeight || document.documentElement.clientHeight) &&
          rect.right <=
            (window.innerWidth || document.documentElement.clientWidth)
        );
      }

      document.addEventListener(
        "scroll",
        function () {
          if (isInViewport(document.getElementById("decline"))) {
            document.getElementById("changingBg").style.backgroundImage =
              "url(https://upload.wikimedia.org/wikipedia/commons/6/64/Placido_Costanzi_-_Alexander_the_Great_Founding_Alexandria_-_Walters_37790.jpg)";
          }
          if (isInViewport(document.getElementById("increase"))) {
            document.getElementById("changingBg").style.backgroundImage =
              "url(https://upload.wikimedia.org/wikipedia/commons/1/1e/Jacques-Louis_David_-_The_Coronation_of_Napoleon_%281805-1807%29.jpg)";
          }
        },
        {
          passive: true,
        }
      );
    </script> -->
  </body>
</html>
